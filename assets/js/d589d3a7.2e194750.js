"use strict";(self.webpackChunksmgf_website=self.webpackChunksmgf_website||[]).push([[162],{6443:(e,n,i)=>{i.r(n),i.d(n,{assets:()=>r,contentTitle:()=>a,default:()=>h,frontMatter:()=>t,metadata:()=>l,toc:()=>d});var s=i(5893),o=i(1151);const t={title:"Getting started",sidebar_position:2},a="Getting started",l={id:"getting-started",title:"Getting started",description:"installation",source:"@site/docs/getting-started.md",sourceDirName:".",slug:"/getting-started",permalink:"/smgf/docs/getting-started",draft:!1,unlisted:!1,editUrl:"https://github.com/superzazu/smgf/tree/master/docs/docs/getting-started.md",tags:[],version:"current",sidebarPosition:2,frontMatter:{title:"Getting started",sidebar_position:2},sidebar:"default",previous:{title:"Introduction",permalink:"/smgf/docs/introduction"},next:{title:"Examples",permalink:"/smgf/docs/examples"}},r={},d=[{value:"installation",id:"installation",level:2},{value:"how to make a game",id:"how-to-make-a-game",level:2},{value:"how to run games",id:"how-to-run-games",level:2},{value:"the game loop",id:"the-game-loop",level:3},{value:"the configuration file",id:"the-configuration-file",level:3},{value:"how to distribute a game",id:"how-to-distribute-a-game",level:2},{value:"how to run your game on the web",id:"how-to-run-your-game-on-the-web",level:2},{value:"building SMGF yourself",id:"building-smgf-yourself",level:2},{value:"cross-compiling for the web",id:"cross-compiling-for-the-web",level:3},{value:"cross-compiling to Windows",id:"cross-compiling-to-windows",level:3},{value:"LSP annotations",id:"lsp-annotations",level:2},{value:"Visual Studio Code",id:"visual-studio-code",level:3}];function c(e){const n={a:"a",admonition:"admonition",code:"code",em:"em",h1:"h1",h2:"h2",h3:"h3",li:"li",p:"p",pre:"pre",ul:"ul",...(0,o.a)(),...e.components};return(0,s.jsxs)(s.Fragment,{children:[(0,s.jsx)(n.h1,{id:"getting-started",children:"Getting started"}),"\n",(0,s.jsx)(n.h2,{id:"installation",children:"installation"}),"\n",(0,s.jsxs)(n.p,{children:["Download compiled binaries from GitHub ",(0,s.jsx)(n.a,{href:"https://github.com/superzazu/smgf/releases/latest",children:"here"})," for your platform and unzip the file on your computer."]}),"\n",(0,s.jsx)(n.admonition,{type:"note",children:(0,s.jsxs)(n.p,{children:["You can also ",(0,s.jsx)(n.a,{href:"/smgf/docs/getting-started#building-smgf-yourself",children:"build from source"})," if your platform is not available or if you want to customise build options. SMGF should be compatible with every platform that SDL2 supports."]})}),"\n",(0,s.jsx)(n.h2,{id:"how-to-make-a-game",children:"how to make a game"}),"\n",(0,s.jsx)(n.p,{children:'Create a folder "my_game" anywhere with a file "main.lua" inside it:'}),"\n",(0,s.jsx)(n.pre,{children:(0,s.jsx)(n.code,{className:"language-lua",children:"function smgf.init()\n\nend\n\nfunction smgf.update(dt)\n\nend\n\nfunction smgf.draw()\n  smgf.graphics.clear()\n  smgf.graphics.set_color(255, 0, 0)\n  smgf.graphics.draw_rect(5, 5, 10, 10)\nend\n"})}),"\n",(0,s.jsx)(n.h2,{id:"how-to-run-games",children:"how to run games"}),"\n",(0,s.jsxs)(n.p,{children:["SMGF can run a game from either a folder or a ",(0,s.jsx)(n.code,{children:".smgf"})," file (which is a zip file of the contents of your game folder, with the ",(0,s.jsx)(n.code,{children:".smgf"})," extension)."]}),"\n",(0,s.jsxs)(n.p,{children:["On Mac or Windows, just drag'n'drop your folder \"my_game\" onto the ",(0,s.jsx)(n.code,{children:"SMGF"})," executable to run it. You should see a window with a red rectangle in it."]}),"\n",(0,s.jsx)(n.p,{children:"From a terminal, you can also run:"}),"\n",(0,s.jsx)(n.pre,{children:(0,s.jsx)(n.code,{className:"language-sh",children:"./SMGF path/to/my_game\n"})}),"\n",(0,s.jsx)(n.h3,{id:"the-game-loop",children:"the game loop"}),"\n",(0,s.jsxs)(n.p,{children:[(0,s.jsx)(n.code,{children:"smgf.init"}),", ",(0,s.jsx)(n.code,{children:"smgf.update"})," and ",(0,s.jsx)(n.code,{children:"smgf.draw"})," are the three pillars of every SMGF game, those functions will be called by SMGF at different times during execution:"]}),"\n",(0,s.jsxs)(n.ul,{children:["\n",(0,s.jsxs)(n.li,{children:[(0,s.jsx)(n.code,{children:"smgf.init"})," is only called once at game start"]}),"\n",(0,s.jsxs)(n.li,{children:[(0,s.jsx)(n.code,{children:"smgf.update"})," is called once for every frame of the game (typically 60 times per second). The argument ",(0,s.jsx)(n.code,{children:"dt"})," contains the time in seconds since last call. This is where all game updates should be done."]}),"\n",(0,s.jsxs)(n.li,{children:[(0,s.jsx)(n.code,{children:"smgf.draw"})," is called once for every frame ",(0,s.jsx)(n.em,{children:"after"})," ",(0,s.jsx)(n.code,{children:"smgf.update"}),". This function is where all draw calls (eg ",(0,s.jsx)(n.code,{children:"smgf.graphics.draw"}),") should be made."]}),"\n"]}),"\n",(0,s.jsxs)(n.p,{children:["There are other callbacks, such as ",(0,s.jsx)(n.code,{children:"smgf.key_down()"})," which is called when a key on the keyboard is pressed. Go to ",(0,s.jsx)(n.a,{href:"/smgf/docs/api",children:"API reference"}),' and search for "callback" to see them all.']}),"\n",(0,s.jsx)(n.h3,{id:"the-configuration-file",children:"the configuration file"}),"\n",(0,s.jsxs)(n.p,{children:["A configuration file named ",(0,s.jsx)(n.code,{children:"conf.lua"})," can also be added next to ",(0,s.jsx)(n.code,{children:"main.lua"})," to customise options such as window size, window title etc. This file is read automatically by SMGF before starting the game."]}),"\n",(0,s.jsxs)(n.p,{children:["Here's an example ",(0,s.jsx)(n.code,{children:"conf.lua"})," file:"]}),"\n",(0,s.jsx)(n.pre,{children:(0,s.jsx)(n.code,{className:"language-lua",children:"local conf = {}\nconf.width = 640 -- in pixels\nconf.height = 480 -- in pixels\nconf.window_title = \"my super game\"\nconf.fps = 0 -- to limit FPS (set to 0 to disable FPS limiting)\nconf.zoom = 1 -- a zoom\nconf.cursor_visible = true -- whether to show the mouse cursor when inside window\nconf.application = 'my-super-game' -- unique identifier of your game (see game identity in docs)\nconf.organisation = 'my-super-organisation' -- unique identifier of your organisation (see game identity in docs)\nreturn conf\n"})}),"\n",(0,s.jsx)(n.h2,{id:"how-to-distribute-a-game",children:"how to distribute a game"}),"\n",(0,s.jsxs)(n.p,{children:["To easily share your games with people, the simple way is to ZIP all files inside your game folder, then rename that file so it has the extension ",(0,s.jsx)(n.code,{children:".smgf"}),". You can share this file with people who already have SMGF installed."]}),"\n",(0,s.jsxs)(n.p,{children:["When SMGF starts, if a file named ",(0,s.jsx)(n.code,{children:"game.smgf"})," exists, SMGF automatically starts this game. You can bundle your ",(0,s.jsx)(n.code,{children:"game.smgf"})," file with the SMGF executable and libs to distribute to people who do not have SMGF installed on their machine."]}),"\n",(0,s.jsx)(n.admonition,{type:"tip",children:(0,s.jsxs)(n.p,{children:["On macOS, put your ",(0,s.jsx)(n.code,{children:"game.smgf"})," file inside ",(0,s.jsx)(n.code,{children:"SMGF.app"}),': right click on the app bundle and click "Show Package Contents", then put your file in ',(0,s.jsx)(n.code,{children:"Contents/Resources/"})," folder."]})}),"\n",(0,s.jsx)(n.h2,{id:"how-to-run-your-game-on-the-web",children:"how to run your game on the web"}),"\n",(0,s.jsxs)(n.p,{children:["You need to install ",(0,s.jsx)(n.a,{href:"https://emscripten.org/docs/getting_started/downloads.html",children:"emscripten"}),".\nThen, download ",(0,s.jsx)(n.a,{href:"https://github.com/superzazu/smgf/releases/latest",children:"smgf-web"})," from GitHub."]}),"\n",(0,s.jsx)(n.p,{children:"Run the following command to run SMGF in your browser:"}),"\n",(0,s.jsx)(n.pre,{children:(0,s.jsx)(n.code,{className:"language-sh",children:"emrun smgf.html\n"})}),"\n",(0,s.jsx)(n.p,{children:"To run your game instead of the default one, you need to package your game files differently than other platforms:"}),"\n",(0,s.jsx)(n.pre,{children:(0,s.jsx)(n.code,{className:"language-sh",children:"python3 $EMSDK_PATH/upstream/emscripten/tools/file_packager.py game.data --preload $PATH_TO_MY_GAME_FOLDER@/game\n"})}),"\n",(0,s.jsxs)(n.p,{children:["This will create a ",(0,s.jsx)(n.code,{children:"game.data"})," file that you can use with SMGF."]}),"\n",(0,s.jsx)(n.h2,{id:"building-smgf-yourself",children:"building SMGF yourself"}),"\n",(0,s.jsx)(n.p,{children:"If you want to customise build options or if there is no official release for your platform, you need to build SMGF yourself. SMGF can be compiled on macOS, Linux and Windows.\nIt requires the SDL2 to be installed on your machine:"}),"\n",(0,s.jsxs)(n.ul,{children:["\n",(0,s.jsxs)(n.li,{children:["macOS: ",(0,s.jsx)(n.code,{children:"brew install sdl2"})]}),"\n",(0,s.jsxs)(n.li,{children:["debian/Ubuntu: ",(0,s.jsx)(n.code,{children:"apt install libsdl2-dev libreadline-dev"})]}),"\n",(0,s.jsxs)(n.li,{children:["Windows: ",(0,s.jsx)(n.code,{children:"vcpkg install sdl2"})]}),"\n"]}),"\n",(0,s.jsx)(n.p,{children:"CMake is used to build the project. You can build SMGF for your platform\nwith those commands:"}),"\n",(0,s.jsx)(n.pre,{children:(0,s.jsx)(n.code,{className:"language-shell",children:"mkdir build && cd build\ncmake .. -DCMAKE_BUILD_TYPE=Debug # or Release or RelWithDebInfo\ncmake --build .\n"})}),"\n",(0,s.jsxs)(n.p,{children:["This should get you the ",(0,s.jsx)(n.code,{children:"sgmf"})," executable needed for development."]}),"\n",(0,s.jsx)(n.admonition,{type:"tip",children:(0,s.jsxs)(n.p,{children:["On macOS, to compile for both Intel and Apple Silicon, add ",(0,s.jsx)(n.code,{children:'-DCMAKE_OSX_ARCHITECTURES="x86_64;arm64"'})," to the first CMake command."]})}),"\n",(0,s.jsx)(n.h3,{id:"cross-compiling-for-the-web",children:"cross-compiling for the web"}),"\n",(0,s.jsxs)(n.p,{children:["SMGF can be cross-compiled for the web thanks to emscripten. You need\nto install the ",(0,s.jsx)(n.a,{href:"https://emscripten.org/docs/getting_started/downloads.html#download-and-install",children:"emscripten SDK"}),"."]}),"\n",(0,s.jsxs)(n.p,{children:["You will have to use the ",(0,s.jsx)(n.code,{children:"emcmake cmake .."})," command:"]}),"\n",(0,s.jsx)(n.pre,{children:(0,s.jsx)(n.code,{className:"language-shell",children:'mkdir build-web && cd build-web\n# you have to set the variable "GAME_PATH" to specify the game you\n# want to bundle with smgf:\nemcmake cmake .. -DGAME_PATH=$HOME/mysupergame\ncmake --build .\n'})}),"\n",(0,s.jsx)(n.p,{children:"You can then upload the smgf.html/js/wasm/data files on a web server."}),"\n",(0,s.jsx)(n.h3,{id:"cross-compiling-to-windows",children:"cross-compiling to Windows"}),"\n",(0,s.jsxs)(n.p,{children:["To cross-compile to Windows from macOS or Linux, you have to install MinGW and the ",(0,s.jsx)(n.a,{href:"https://github.com/libsdl-org/SDL/releases/download/release-2.26.1/SDL2-devel-2.26.1-mingw.tar.gz",children:"SDL2 MinGW development libraries"}),"."]}),"\n",(0,s.jsxs)(n.p,{children:["On a Mac, you can install MinGW with Homebrew ",(0,s.jsx)(n.code,{children:"brew install mingw-w64"})," and the SDL development librairies using ",(0,s.jsx)(n.code,{children:"make install-package arch=x86_64-w64-mingw32 prefix=$(brew --prefix mingw-w64)/toolchain-x86_64/x86_64-w64-mingw32"}),"."]}),"\n",(0,s.jsx)(n.p,{children:"When everything is set up, run:"}),"\n",(0,s.jsx)(n.pre,{children:(0,s.jsx)(n.code,{className:"language-shell",children:"mkdir build-win && cd build-win\ncmake -DCMAKE_TOOLCHAIN_FILE=../scripts/cmake/windows_toolchain.cmake -DMINGW_PREFIX=$(brew --prefix mingw-w64)/toolchain-x86_64 ..\ncmake --build .\n"})}),"\n",(0,s.jsx)(n.p,{children:"DLL files are automatically copied to the folder where smgf.exe is."}),"\n",(0,s.jsx)(n.h2,{id:"lsp-annotations",children:"LSP annotations"}),"\n",(0,s.jsxs)(n.p,{children:["Annotations for ",(0,s.jsx)(n.a,{href:"https://github.com/LuaLS/lua-language-server",children:"lua-language-server"})," (Lua LSP server) are available for the whole SMGF API. These should be compatible with every editor that supports LSP."]}),"\n",(0,s.jsx)(n.h3,{id:"visual-studio-code",children:"Visual Studio Code"}),"\n",(0,s.jsxs)(n.p,{children:["In ",(0,s.jsx)(n.a,{href:"https://code.visualstudio.com",children:"Visual Studio Code"}),", install ",(0,s.jsx)(n.a,{href:"https://marketplace.visualstudio.com/items?itemName=sumneko.lua",children:"sumneko.lua"})," extension."]}),"\n",(0,s.jsxs)(n.p,{children:["In your user settings, add ",(0,s.jsx)(n.code,{children:"$PATH_TO_SMGF/docs-api"})," to ",(0,s.jsx)(n.code,{children:"Lua.workspace.library"})," , so that the LSP can find SMGF annotations automatically."]})]})}function h(e={}){const{wrapper:n}={...(0,o.a)(),...e.components};return n?(0,s.jsx)(n,{...e,children:(0,s.jsx)(c,{...e})}):c(e)}},1151:(e,n,i)=>{i.d(n,{Z:()=>l,a:()=>a});var s=i(7294);const o={},t=s.createContext(o);function a(e){const n=s.useContext(t);return s.useMemo((function(){return"function"==typeof e?e(n):{...n,...e}}),[n,e])}function l(e){let n;return n=e.disableParentContext?"function"==typeof e.components?e.components(o):e.components||o:a(e.components),s.createElement(t.Provider,{value:n},e.children)}}}]);